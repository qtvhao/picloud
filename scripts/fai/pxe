#!/bin/bash
set -e
echo "Provisioning on metal machine"
make > /dev/null 2>&1 ||
    apt install -y make
ansible-playbook > /dev/null 2>&1 || \
    apt install -y ansible
pip > /dev/null 2>&1 \
    || apt install -y python3-pip
pip install docker
pip3 install ansible
PYTHON_VERSION=$(python3 --version | cut -d' ' -f2 | cut -d'.' -f1-2)
echo "Python version: $PYTHON_VERSION"
python3 --version || apt install -y python3
make -C metal
